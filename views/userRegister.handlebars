{{!--

If the user is NOT logged in, and 'GET /register' endpoint is called, you will render this sign-up form view that displays two input (one for the username and one for password):
-The form will be used to submit the POST request to the '/register' route on the server and must have an 'id' of 'registration-form'
-The input for the username must have a 'name' and 'id' of 'usernameInput'
-The input for the password must have a 'name' and 'id' of 'passwordInput' and should be an input type of password.

Do not forget to use labels for your inputs! For the labels, you will use the method of using the 'for' attribute. 
You should have a label for both the username and password inputs referencing their id's in the for attribute of the label

You will also have a link on this page that links to '/' and has the text "Already have an account? Click here to log-in"

--}}
    <h1>Register</h1>
    {{#if error}}
        <p>{{error_message}}</p>
    {{/if}}
    <br/>
    <div>
        <form action="/user/register" method="POST" id="registration-form">
                <label for="usernameInput">Username:</label>
                <input type="text" name="usernameInput" id="usernameInput" value="{{userName}}">
                <br>
                <label for="passwordInput">Password:</label>
                <input type="password" name="passwordInput" id="passwordInput">
                <br>
                <label for="firstNameInput">First Name:</label>
                <input type="Text" name="firstNameInput" id="firstNameInput" value="{{firstName}}">
                <br>
                <label for="lastNameInput">Last Name:</label>
                <input type="Text" name="lastNameInput" id="lastNameInput" value="{{lastName}}">
                <br>
                <label for="College">Choose Your College:</label>

                <select name="collegeNameInput" id="collegeNameInput">
                <option value="">--Please choose your College--</option>
                {{#each collegeList}}
                    <option value="{{college}}">{{college}}</option>
                {{/each}}
                </select>
                
                <br>
                <input type="submit" value="Register" id="register">

                
        </form>
    <a href="/user/login">Already have an account? Click here to log-in</a>    
    </div>
    <style>
  form {
    width: 400px;
    margin: 0 auto;
    padding: 20px;
    border: 1px solid #ccc;
    border-radius: 5px;
  }

  label {
    display: block;
    margin-bottom: 10px;
  }

  input[type="text"],
  input[type="password"] {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 3px;
  }

  input[type="submit"] {
    background-color: #4CAF50;
    color: white;
    padding: 10px 20px;
    margin-top: 10px;
    border: none;
    border-radius: 3px;
    cursor: pointer;
  }

  select {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 3px;
  }

  a {
    display: inline-block;
    margin-top: 10px;
  }
</style>

<script>
  // Get references to the form and input fields
  const registrationForm = document.querySelector('#registration-form');
  const usernameInput = document.querySelector('#usernameInput');
  const passwordInput = document.querySelector('#passwordInput');
  const firstNameInput = document.querySelector('#firstNameInput');
  const lastNameInput = document.querySelector('#lastNameInput');
  const collegeNameInput = document.querySelector('#collegeNameInput');
  


  function validatePassword(password) {
  // Check if the password is empty or contains only whitespace
  if (!password || password.trim().length === 0) {
    return("Password cannot be empty or contain only whitespace");
  }

  // Check if the password is at least 6 characters long
  if (password.length < 6) {
    return("Password must be at least 6 characters long");
  }

  // Check if the password contains at least one uppercase character
  if (!/[A-Z]/.test(password)) {
    return("Password must contain at least one uppercase character");
  }

  // Check if the password contains at least one number
  if (!/[0-9]/.test(password)) {
    return("Password must contain at least one number");
  }

  // Check if the password contains at least one special character
  if (!/[^a-zA-Z0-9]/.test(password)) {
    return("Password must contain at least one special character");
  }

  // If all checks pass, the password is valid
  return false;
}

function validateUserName(str) {
  // Check if the string is empty or contains only whitespace
  if (!str || str.trim().length === 0) {
    return("String cannot be empty or contain only whitespace");
  }

  // Check if the string is at least 4 characters long
  if (str.length < 4) {
    return("String must be at least 4 characters long");
  }

  // Check if the string contains only alphanumeric characters
  if (!/^[a-zA-Z0-9]+$/.test(str)) {
    return("String can only contain alphanumeric characters");
  }

  // If all checks pass, the string is valid
  return false;
}




  // Function to validate the form input
  function validateForm() {
    // check if the username is empty

    let e = validateUserName(usernameInput.value);
    if (e) {
      alert(e);
      return false;
    }

    // check if the password is empty
    e = validatePassword(passwordInput.value);
    if (e) {
      alert(e);
      return false;
    }

    // check if the first name is empty
    if (firstNameInput.value.trim() === '') {
      alert('Please enter your first name');
      return false;
    }

    // check if the last name is empty
    if (lastNameInput.value.trim() === '') {
      alert('Please enter your last name');
      return false;
    }

    // check if a college has been selected
    if (collegeNameInput.value.trim() === '') {
      alert('Please select your college');
      return false;
    }

    // If all the checks pass, allow the form to be submitted
    return true;
  }

  // Add an event listener to the form to validate the input when the form is submitted
  registrationForm.addEventListener('submit', (event) => {
    // prevent the form from being submitted if the input is invalid
    if (!validateForm()) {
      event.preventDefault();
    }
  });
</script>